name: Pure Parser Contract
tag: pure-parser

description: |
  All IO parsers follow the same contract:
  - Single exported async function taking a file/directory path as input
  - Returns a typed data structure (never raw YAML objects)
  - Validates required fields and throws descriptive Error if missing
  - No side effects beyond reading the file system
  - Uses the `yaml` library (YAML 1.2) for parsing YAML files
  - Handles optional fields with sensible defaults (empty arrays, false, etc.)

requirements:
  - "Export exactly one primary async function per parser"
  - "Validate required fields immediately after parsing"
  - "Throw Error with a message that includes the file path and what is missing"
  - "Normalize data types — e.g. mapping.path string → string[], optional arrays → []"
  - "Never return raw parsed YAML — always map to typed interfaces from model/types.ts"
